<html>
<script>
    let u = window.location;
    window.onload = () => {
        let x = document.getElementsByTagName('code');
        for (var i = 0; i < x.length; i++) {
            var res = x[i].innerHTML.replace(/\{localhost:3000\}/gi, window.location.host);
            x[i].innerHTML = res;
        }
    }
</script>
<style>
    body {
        margin: 1em auto;
        max-width: 120ex;
    }
    img {
       float:right
    }
    li {
        clear:right
    }
    pre {
        background-color: black;
        color: white;
        padding: 7px 10px;
        white-space: pre-line;
    }
</style>

<body style="background-color: lightgrey">
    <h1>Qr Code as a Service</h1>
    <p>Welcome to my QR Code generator service. It only do 1 thing: display the QR Code for current page.</p>
    <img src="/qrcode" />
    <h2>How to use</h2>
    <p> Just put the following code to your page and it will be repalced by a QR code linking to current page</p>
    <pre>
        <code>
            &lt;img src="//{localhost:3000}/qrcode" /&gt;
        </code>
    </pre>
    <p>How it works: When an image is embedded in a page the browser sends a request with the current page as a referer header. The service use that header to build and return the qr code as a PNG imnage.</p>
    <h2>Addtional parameters and customization</h2>
    <p>You can change the look of the qr code with the following parameters:</p>
    <ul>
        <li>
            <p>
                <code>color</code> and <code>background</code> (default value #000 and #FFF): allows to change the color respectively of the squares and background color. It should be an RGB code with hex values (ex: red as FF0000). It's even possible to use transparency in the code at the end of the code (ex: transparent is 00000000).
                Example red on transparent:
            </p>
            <pre><code>&lt;img src="//{localhost:3000}/qrcode?color=CC0000&amp;background=00000000" /&gt;</code></pre>
            <img src="/qrcode?color=CC0000&background=00000000" alt="Red on transparent code"/>
        </li>
        <li>
            <p>
                <code>size</code> (default value: auto) : allows to enlarge the code to a define size. The image will be set to the specified size unless it's larger.
                Example size 200:
            </p>
            <pre><code>&lt;img src="//{localhost:3000}/qrcode?size=200" /&gt;</code></pre>
            <img src="/qrcode?size=200" alt="QR Code 150px wide"/>
        </li>
        <li>
            <p>
                <code>scale</code> (default value 4) : allows to specify the size of each square in the code - and has an impact on the size of the image.
                Example scale 1px:
            </p>
            <pre><code>&lt;img src="//{localhost:3000}/qrcode?size=150" /&gt;</code></pre>
            <img src="/qrcode?scale=1" alt="QR Code with 1px squares"/>
        </li>
    </ul>
</body>
</html>